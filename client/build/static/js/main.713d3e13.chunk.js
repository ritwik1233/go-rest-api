(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(9),s=n.n(i),r=n(18),o=n(24),l=n(67),d=n(25),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUserToken:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUserToken:t.payload});case"LOGOUT_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUserToken:null});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{messages:t.payload});default:return e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_COMMENTS":return Object(d.a)(Object(d.a)({},e),{},{comments:t.payload});default:return e}},x=Object(o.c)({auth:j,message:m,comments:u}),p=n(51),b=n(68),h=n(69),O=n.n(h),g=n(147),f=n(73),v=n(12),y=n(17),C=n(160),T=n(75),_=n(152),U=n(159),k=n(153),M=n(154),E=n(155),S=n(151),L=n(16),w=n.n(L);function G(){return function(e){w.a.get("/api/getAllMessage",{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"GET_ALL_MESSAGE",payload:t.data||[]})})).catch((function(t){console.error(t),e({type:"GET_ALL_MESSAGE",payload:[]})}))}}function W(e){return function(t){w.a.get("/api/getComments",{headers:{"Content-Type":"application/json"},params:{messageId:e}}).then((function(e){t({type:"GET_ALL_COMMENTS",payload:e.data||[]})})).catch((function(e){console.error(e),t({type:"GET_ALL_COMMENTS",payload:[]})}))}}var D=n(158),A=n(2);function P(e){return Object(A.jsx)("form",{onSubmit:function(t){t.preventDefault();var n={};n.email=t.target.email.value,n.password=t.target.password.value,e.handleLogin(n)},style:{marginTop:"10px",width:"inherit"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"email",fullWidth:!0,label:"Email",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"password",fullWidth:!0,label:"Password",type:"password",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Login"})}),Object(A.jsx)(g.a,{item:!0,xs:1})]})})}P.defaultProps={handleLogin:function(){}};var I=P;function R(e){return Object(A.jsx)("form",{onSubmit:function(t){t.preventDefault();var n={};n.email=t.target.email.value,n.password=t.target.password.value,e.handleRegister(n)},style:{marginTop:"10px",width:"inherit"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"email",fullWidth:!0,label:"Email",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"password",fullWidth:!0,type:"password",label:"Password",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Register"})}),Object(A.jsx)(g.a,{item:!0,xs:1})]})})}R.defaultProps={handleRegister:function(){}};var F=R;function B(e){var t=Object(r.c)(),n=c.a.useState(!1),a=Object(y.a)(n,2),i=a[0],s=a[1],o=c.a.useState(0),l=Object(y.a)(o,2),d=l[0],j=l[1],m=Object(A.jsx)(C.a,{open:i,onClose:function(){s(!i)},children:Object(A.jsxs)(T.a,{style:{marginTop:"250px",marginLeft:"25%",width:"50%"},children:[Object(A.jsx)(_.a,{position:"static",children:Object(A.jsxs)(U.a,{value:d,onChange:function(e,t){j(t)},children:[Object(A.jsx)(k.a,{label:"Login",value:0}),Object(A.jsx)(k.a,{label:"Register",value:1})]})}),Object(A.jsx)(T.a,{role:"tabpanel",hidden:0!==d,children:Object(A.jsx)(I,{handleLogin:function(e){console.log(e),w.a.post("/api/login",e,{headers:{"Content-Type":"application/json"}}).then((function(){t((function(e){w.a.get("/api/getuser",{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"GET_USER",payload:t.data.email})})).catch((function(){e({type:"LOGOUT_USER"})}))})),s(!1)})).catch((function(e){console.log(e),alert("Login Failed")}))}})}),Object(A.jsx)(T.a,{role:"tabpanel",hidden:1!==d,children:Object(A.jsx)(F,{handleRegister:function(e){w.a.post("/api/register",e,{headers:{"Content-Type":"application/json"}}).then((function(){s(!1)})).catch((function(e){console.log(e),alert("Registration Failed")}))}})})]})});return Object(A.jsx)(_.a,{position:"static",style:{width:"100%"},children:Object(A.jsx)(M.a,{children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:12}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(E.a,{variant:"h6",children:"Go Demo Forum"})}),e.currentUserToken?Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:1,children:Object(A.jsx)(E.a,{variant:"caption",style:{marginTop:"20px"},children:e.currentUserToken})}),Object(A.jsx)(g.a,{item:!0,xs:1,children:Object(A.jsx)(S.a,{fullWidth:!0,size:"small",color:"inherit",onClick:function(){var n;t((n=e.currentUserToken,function(e){w.a.get("/api/logout",{headers:{"Content-Type":"application/json",Authorization:n}}).then((function(t){console.log(t.data.result),e({type:"LOGOUT_USER"})})).catch((function(){e({type:"LOGOUT_USER"})}))}))},children:"Logout"})})]}):Object(A.jsx)(g.a,{item:!0,xs:2,children:Object(A.jsx)(S.a,{fullWidth:!0,color:"inherit",onClick:function(){s(!0)},children:"Login"})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:m})]})})})}B.defaultProps={currentUserToken:null,openLoginModal:function(){}};var q=Object(r.b)((function(e){return{currentUserToken:e.auth.currentUserToken}}))(B),z=n(156),N=n(157);function V(e){return Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)("form",{id:"create-comment",onSubmit:function(t){t.preventDefault();var n={};n.comment=t.target.comment.value,e.createComment(n)},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(D.a,{name:"comment",fullWidth:!0,multiline:!0,label:"Add Comment",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Add Comment"})})]})})})}V.defaultProps={createComment:function(){}};var J=V;function H(e){return Object(A.jsx)("form",{id:"update-comment",onSubmit:function(t){t.preventDefault();var n={};n.comment=t.target.message.value,e.updateComment(n,e.commentId)},style:{marginTop:"10px"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0,defaultValue:e.comment})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Update Comment"})}),Object(A.jsx)(g.a,{item:!0,xs:1})]})})}H.defaultProps={commentId:"",comment:"",updateComment:function(){}};var K=H;function Q(e){var t=c.a.useState(null),n=Object(y.a)(t,2),a=n[0],i=n[1],s=function(t,n){e.updateComment(t,n),i(null)};return Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:12,style:{margin:"0px",padding:"0px"},children:e.comments.length>0?e.comments.map((function(t){return Object(A.jsx)(g.a,{container:!0,spacing:3,style:{margin:"0px",padding:"0px"},children:Object(A.jsx)(g.a,{item:!0,xs:12,style:{margin:"0px",padding:"0px"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,style:{margin:"0px",padding:"0px"},children:[Object(A.jsx)(g.a,{item:!0,xs:10,style:{margin:"0px",padding:"0px"},children:a!==t._id?Object(A.jsx)(E.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.comment}):Object(A.jsx)(K,{commentId:t._id,comment:t.comment,updateComment:s})}),e.currentUserToken===t.createdBy&&Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:1,style:{margin:"0px",padding:"0px"},children:Object(A.jsx)(S.a,{varaint:"contained",color:"secondary",size:"small",onClick:function(){e.deleteComment(t._id)},children:"Delete"})}),Object(A.jsx)(g.a,{item:!0,xs:1,style:{margin:"0px",padding:"0px"},children:Object(A.jsx)(S.a,{varaint:"contained",color:"primary",size:"small",onClick:function(){a!==t._id?i(t._id):i(null)},children:"Update"})})]}),a!==t._id&&Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:8,style:{margin:"0px",padding:"0px"}}),Object(A.jsx)(g.a,{item:!0,xs:4,style:{margin:"0px",padding:"0px"},children:Object(A.jsx)(E.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.createdBy})}),Object(A.jsx)(g.a,{item:!0,xs:8,style:{margin:"0px",padding:"0px"}}),Object(A.jsx)(g.a,{item:!0,xs:4,style:{margin:"0px",padding:"0px"},children:Object(A.jsx)(E.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.createdDate.toString()})})]})]})})},t._id)})):Object(A.jsx)(E.a,{variant:"body1",children:"No Comments.."})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:"\xa0"}),e.currentUserToken&&Object(A.jsx)(J,{createComment:function(t){e.createComment(t)}})]})}Q.defaultProps={comments:[],currentUserToken:null,deleteComment:function(){},createComment:function(){},updateComment:function(){}};var X=Q;function Y(e){return Object(A.jsx)("form",{id:"update-message",onSubmit:function(t){t.preventDefault();var n={};n.message=t.target.message.value,e.updateMessage(n)},style:{marginTop:"10px"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(D.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0,defaultValue:e.Message})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Update Message"})})]})})}Y.defaultProps={Message:"",updateMessage:function(){}};var Z=Y;function $(e){var t=Object(r.c)(),n=c.a.useState(!1),a=Object(y.a)(n,2),i=a[0],s=a[1];return Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:2}),Object(A.jsx)(g.a,{item:!0,xs:8,children:Object(A.jsx)(z.a,{children:Object(A.jsx)(N.a,{children:Object(A.jsxs)(g.a,{container:!0,spacing:0,children:[Object(A.jsx)(g.a,{item:!0,xs:10,children:i?Object(A.jsx)(Z,{updateMessage:function(n){w.a.put("api/updateMessage",n,{params:{messageId:e._id},headers:{"Content-Type":"application/json"}}).then((function(){t(G()),s(!1)})).catch((function(e){console.log(e)}))},Message:e.message}):Object(A.jsx)(E.a,{variant:"body1",children:e.message})}),e.currentUserToken===e.createdBy&&Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:1,children:Object(A.jsx)(S.a,{varaint:"contained",color:"secondary",size:"small",onClick:function(){e.deleteMessage(e._id)},children:"Delete"})}),Object(A.jsx)(g.a,{item:!0,xs:1,children:Object(A.jsx)(S.a,{varaint:"contained",color:"primary",size:"small",onClick:function(){s(!i)},children:"Update"})})]}),Object(A.jsx)(g.a,{item:!0,xs:8}),Object(A.jsx)(g.a,{item:!0,xs:4,children:Object(A.jsx)(E.a,{variant:"caption",children:e.createdBy})}),Object(A.jsx)(g.a,{item:!0,xs:8}),Object(A.jsx)(g.a,{item:!0,xs:4,children:Object(A.jsx)(E.a,{variant:"caption",children:e.createdDate.toString()})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(S.a,{variant:"text",size:"small",onClick:function(){e.getComments(e._id)},children:e.viewComments?"Hide Comments":"View Comments"})}),e.viewComments&&Object(A.jsx)(X,{comments:e.comments,currentUserToken:e.currentUserToken,deleteComment:function(n){w.a.delete("api/deleteComment",{params:{commentId:n},headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(W(e._id))})).catch((function(e){console.log(e)}))},createComment:function(n){n.messageId=e._id,w.a.post("api/createComment",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(W(e._id)),document.getElementById("create-comment").reset()})).catch((function(e){console.log(e)}))},updateComment:function(n,a){w.a.put("api/updateComment",n,{params:{commentId:a},headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(W(e._id))})).catch((function(e){console.log(e)}))}})]})})})}),Object(A.jsx)(g.a,{item:!0,xs:2})]})}$.defaultProps={_id:"",message:"",createdBy:"",createdDate:null,comments:[],viewComments:!1,currentUserToken:null,getComments:function(){},deleteMessage:function(){}};var ee=Object(r.b)((function(e){return{comments:e.comments.comments,currentUserToken:e.auth.currentUserToken}}))($);function te(e){return Object(A.jsx)("form",{id:"create-message",onSubmit:function(t){t.preventDefault();var n={};n.message=t.target.message.value,e.handleMessage(n)},style:{marginTop:"10px"},children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(D.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0})}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:1}),Object(A.jsx)(g.a,{item:!0,xs:10,children:Object(A.jsx)(S.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Create Message"})}),Object(A.jsx)(g.a,{item:!0,xs:1})]})})}te.defaultProps={handleMessage:function(){}};var ne=te;function ae(e){var t=Object(r.c)(),n=c.a.useState(null),a=Object(y.a)(n,2),i=a[0],s=a[1];c.a.useEffect((function(){t(G())}),[]);var o=function(e){i===e?(s(null),t(W(""))):(s(e),t(W(e)))},l=function(e){w.a.delete("api/deleteMessage",{params:{messageId:e},headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(G())})).catch((function(e){console.log(e)}))},d=e.messages.map((function(e){var t=new Date(e.createdDate),n=e._id===i;return Object(A.jsx)(ee,{_id:e._id,message:e.message,createdBy:e.createdBy,createdDate:t,getComments:o,deleteMessage:l,viewComments:n},e._id)}));return Object(A.jsx)(g.a,{container:!0,spacing:3,children:Object(A.jsxs)(c.a.Fragment,{children:[Object(A.jsx)(g.a,{item:!0,xs:2}),Object(A.jsx)(g.a,{item:!0,xs:8,children:e.currentUserToken&&Object(A.jsx)(T.a,{children:Object(A.jsx)(ne,{handleMessage:function(e){w.a.post("api/createMessage",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t(G()),document.getElementById("create-message").reset()})).catch((function(e){console.log(e)}))}})})}),Object(A.jsx)(g.a,{item:!0,xs:2}),d]})})}ae.defaultProps={messages:[],currentUserToken:null};var ce=Object(r.b)((function(e){return{messages:e.message.messages,currentUserToken:e.auth.currentUserToken}}))(ae);var ie=function(){return Object(A.jsx)(g.a,{container:!0,spacing:3,children:Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(E.a,{variant:"h4",children:"Page Not Found"})})})},se={key:"root",storage:O.a},re=Object(p.a)(se,x),oe=Object(o.d)(re,{},Object(o.a)(l.a)),le=Object(p.b)(oe);s.a.render(Object(A.jsx)(r.a,{store:oe,children:Object(A.jsx)(b.a,{loading:null,persistor:le,children:Object(A.jsx)(f.a,{children:Object(A.jsxs)(g.a,{container:!0,spacing:3,children:[Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsx)(q,{})}),Object(A.jsx)(g.a,{item:!0,xs:12,children:Object(A.jsxs)(v.c,{children:[Object(A.jsx)(v.a,{exact:!0,path:"/",component:ce}),Object(A.jsx)(v.a,{component:ie})]})})]})})})}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.713d3e13.chunk.js.map