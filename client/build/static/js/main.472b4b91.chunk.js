(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(9),i=n.n(c),r=n(18),o=n(24),l=n(67),d=n(25),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUserToken:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUserToken:t.payload});case"LOGOUT_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUserToken:null});default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{messages:t.payload});default:return e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{comments:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_COMMENTS":return Object(d.a)(Object(d.a)({},e),{},{comments:t.payload});default:return e}},x=Object(o.c)({auth:m,message:j,comments:u}),p=n(51),h=n(68),b=n(69),O=n.n(b),g=n(147),f=n(73),v=n(12),y=n(15),C=n(160),T=n(75),D=n(152),U=n(159),M=n(153),k=n(154),I=n(155),E=n(151),w=n(16),S=n.n(w);function L(){return function(e){S.a.get("/api/getAllMessage",{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"GET_ALL_MESSAGE",payload:t.data.result})})).catch((function(t){console.error(t),e({type:"GET_ALL_MESSAGE",payload:[]})}))}}function A(e){return function(t){S.a.get("/api/getComments",{headers:{"Content-Type":"application/json"},params:{messageId:e}}).then((function(e){t({type:"GET_ALL_COMMENTS",payload:e.data.result})})).catch((function(e){console.error(e),t({type:"GET_ALL_COMMENTS",payload:[]})}))}}var _=n(158),W=n(2);function z(e){return Object(W.jsx)("form",{onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("email",t.target.email.value),n.append("password",t.target.password.value),e.handleLogin(n)},style:{marginTop:"10px",width:"inherit"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"email",fullWidth:!0,label:"Email",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"password",fullWidth:!0,label:"Password",type:"password",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Login"})}),Object(W.jsx)(g.a,{item:!0,xs:1})]})})}z.defaultProps={handleLogin:function(){}};var F=z;function G(e){return Object(W.jsx)("form",{onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("email",t.target.email.value),n.append("password",t.target.password.value),e.handleRegister(n)},style:{marginTop:"10px",width:"inherit"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"email",fullWidth:!0,label:"Email",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"password",fullWidth:!0,type:"password",label:"Password",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Register"})}),Object(W.jsx)(g.a,{item:!0,xs:1})]})})}G.defaultProps={handleRegister:function(){}};var P=G;function B(e){var t=Object(r.c)(),n=s.a.useState(!1),a=Object(y.a)(n,2),c=a[0],i=a[1],o=s.a.useState(0),l=Object(y.a)(o,2),d=l[0],m=l[1],j=s.a.useState(null),u=Object(y.a)(j,2),x=u[0],p=u[1];s.a.useEffect((function(){S.a.get("/api/getCurrentUser",{headers:{"Content-Type":"application/json",Authorization:e.currentUserToken}}).then((function(e){p(e.data.result)})).catch((function(){p(null)}))}),[e.currentUserToken]);var h=Object(W.jsx)(C.a,{open:c,onClose:function(){i(!c)},children:Object(W.jsxs)(T.a,{style:{marginTop:"250px",marginLeft:"25%",width:"50%"},children:[Object(W.jsx)(D.a,{position:"static",children:Object(W.jsxs)(U.a,{value:d,onChange:function(e,t){m(t)},children:[Object(W.jsx)(M.a,{label:"Login",value:0}),Object(W.jsx)(M.a,{label:"Register",value:1})]})}),Object(W.jsx)(T.a,{role:"tabpanel",hidden:0!==d,children:Object(W.jsx)(F,{handleLogin:function(e){t(function(e){return function(t){S()({method:"post",url:"/api/login",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n="".concat(e.data.auth);t({type:"LOGIN_USER",payload:n})}))}}(e)),i(!1)}})}),Object(W.jsx)(T.a,{role:"tabpanel",hidden:1!==d,children:Object(W.jsx)(P,{handleRegister:function(e){S()({method:"post",url:"/api/register",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){i(!1)}))}})})]})});return Object(W.jsx)(D.a,{position:"static",style:{width:"100%"},children:Object(W.jsx)(k.a,{children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:12}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(I.a,{variant:"h6",children:"Go Demo Forum"})}),e.currentUserToken?Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:1,children:Object(W.jsx)(I.a,{variant:"caption",style:{marginTop:"20px"},children:x})}),Object(W.jsx)(g.a,{item:!0,xs:1,children:Object(W.jsx)(E.a,{fullWidth:!0,size:"small",color:"inherit",onClick:function(){var n;t((n=e.currentUserToken,function(e){S.a.get("/api/logout",{headers:{"Content-Type":"application/json",Authorization:n}}).then((function(t){console.log(t.data.result),e({type:"LOGOUT_USER"})})).catch((function(){e({type:"LOGOUT_USER"})}))}))},children:"Logout"})})]}):Object(W.jsx)(g.a,{item:!0,xs:2,children:Object(W.jsx)(E.a,{fullWidth:!0,color:"inherit",onClick:function(){i(!0)},children:"Login"})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:h})]})})})}B.defaultProps={currentUserToken:null,openLoginModal:function(){}};var R=Object(r.b)((function(e){return{currentUserToken:e.auth.currentUserToken}}))(B),q=n(156),N=n(157);function V(e){return Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)("form",{id:"create-comment",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("comment",t.target.comment.value),e.createComment(n)},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(_.a,{name:"comment",fullWidth:!0,multiline:!0,label:"Add Comment",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Add Comment"})})]})})})}V.defaultProps={createComment:function(){}};var J=V;function H(e){return Object(W.jsx)("form",{id:"update-comment",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("comment",t.target.message.value),e.updateComment(n,e.commentId)},style:{marginTop:"10px"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0,defaultValue:e.Comment})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Update Comment"})}),Object(W.jsx)(g.a,{item:!0,xs:1})]})})}H.defaultProps={commentId:"",Comment:"",updateComment:function(){}};var K=H;function Q(e){var t=s.a.useState(null),n=Object(y.a)(t,2),a=n[0],c=n[1],i=function(t,n){e.updateComment(t,n),c(null)};return Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:12,style:{margin:"0px",padding:"0px"},children:e.comments.length>0?e.comments.map((function(t){return Object(W.jsx)(g.a,{container:!0,spacing:3,style:{margin:"0px",padding:"0px"},children:Object(W.jsx)(g.a,{item:!0,xs:12,style:{margin:"0px",padding:"0px"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,style:{margin:"0px",padding:"0px"},children:[Object(W.jsx)(g.a,{item:!0,xs:10,style:{margin:"0px",padding:"0px"},children:a!==t.ID?Object(W.jsx)(I.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.Comment}):Object(W.jsx)(K,{commentId:t.ID,Comment:t.Comment,updateComment:i})}),e.userEmail===t.CreatedBy&&Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:1,style:{margin:"0px",padding:"0px"},children:Object(W.jsx)(E.a,{varaint:"contained",color:"secondary",size:"small",onClick:function(){e.deleteComment(t.ID)},children:"Delete"})}),Object(W.jsx)(g.a,{item:!0,xs:1,style:{margin:"0px",padding:"0px"},children:Object(W.jsx)(E.a,{varaint:"contained",color:"primary",size:"small",onClick:function(){a!==t.ID?c(t.ID):c(null)},children:"Update"})})]}),a!==t.ID&&Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:8,style:{margin:"0px",padding:"0px"}}),Object(W.jsx)(g.a,{item:!0,xs:4,style:{margin:"0px",padding:"0px"},children:Object(W.jsx)(I.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.CreatedBy})}),Object(W.jsx)(g.a,{item:!0,xs:8,style:{margin:"0px",padding:"0px"}}),Object(W.jsx)(g.a,{item:!0,xs:4,style:{margin:"0px",padding:"0px"},children:Object(W.jsx)(I.a,{variant:"caption",style:{margin:"0px",padding:"0px"},children:t.CreatedDate.toString()})})]})]})})},t.ID)})):Object(W.jsx)(I.a,{variant:"body1",children:"No Comments.."})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:"\xa0"}),e.userEmail&&Object(W.jsx)(J,{createComment:function(t){e.createComment(t)}})]})}Q.defaultProps={comments:[],userEmail:null,deleteComment:function(){},createComment:function(){},updateComment:function(){}};var X=Q;function Y(e){return Object(W.jsx)("form",{id:"update-message",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("message",t.target.message.value),e.updateMessage(n)},style:{marginTop:"10px"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(_.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0,defaultValue:e.Message})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Update Message"})})]})})}Y.defaultProps={Message:"",updateMessage:function(){}};var Z=Y;function $(e){var t=Object(r.c)(),n=s.a.useState(null),a=Object(y.a)(n,2),c=a[0],i=a[1],o=s.a.useState(!1),l=Object(y.a)(o,2),d=l[0],m=l[1];s.a.useEffect((function(){S.a.get("/api/getCurrentUser",{headers:{"Content-Type":"application/json",Authorization:e.currentUserToken}}).then((function(e){m(!1),i(e.data.result)})).catch((function(){i(null)}))}),[e.currentUserToken]);return Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:2}),Object(W.jsx)(g.a,{item:!0,xs:8,children:Object(W.jsx)(q.a,{children:Object(W.jsx)(N.a,{children:Object(W.jsxs)(g.a,{container:!0,spacing:0,children:[Object(W.jsx)(g.a,{item:!0,xs:10,children:d?Object(W.jsx)(Z,{updateMessage:function(n){S()({method:"put",url:"api/updateMessage",data:n,params:{messageId:e.ID},headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(L()),m(!1)})).catch((function(e){console.log(e)}))},Message:e.Message}):Object(W.jsx)(I.a,{variant:"body1",children:e.Message})}),c===e.CreatedBy&&Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:1,children:Object(W.jsx)(E.a,{varaint:"contained",color:"secondary",size:"small",onClick:function(){e.deleteMessage(e.ID)},children:"Delete"})}),Object(W.jsx)(g.a,{item:!0,xs:1,children:Object(W.jsx)(E.a,{varaint:"contained",color:"primary",size:"small",onClick:function(){m(!d)},children:"Update"})})]}),Object(W.jsx)(g.a,{item:!0,xs:8}),Object(W.jsx)(g.a,{item:!0,xs:4,children:Object(W.jsx)(I.a,{variant:"caption",children:e.CreatedBy})}),Object(W.jsx)(g.a,{item:!0,xs:8}),Object(W.jsx)(g.a,{item:!0,xs:4,children:Object(W.jsx)(I.a,{variant:"caption",children:e.CreatedDate.toString()})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(E.a,{variant:"text",size:"small",onClick:function(){e.getComments(e.ID)},children:e.viewComments?"Hide Comments":"View Comments"})}),e.viewComments&&Object(W.jsx)(X,{comments:e.comments,userEmail:c,deleteComment:function(n){S()({method:"delete",url:"api/deleteComment",params:{commentId:n},headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(A(e.ID))})).catch((function(e){console.log(e)}))},createComment:function(n){n.append("messageId",e.ID),S()({method:"post",url:"api/createComment",data:n,headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(A(e.ID)),document.getElementById("create-comment").reset()})).catch((function(e){console.log(e)}))},updateComment:function(n,a){S()({method:"put",url:"api/updateComment",data:n,params:{commentId:a},headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(A(e.ID))})).catch((function(e){console.log(e)}))}})]})})})}),Object(W.jsx)(g.a,{item:!0,xs:2})]})}$.defaultProps={ID:"",Message:"",CreatedBy:"",CreatedDate:null,comments:[],viewComments:!1,currentUserToken:null,getComments:function(){},deleteMessage:function(){}};var ee=Object(r.b)((function(e){return{comments:e.comments.comments,currentUserToken:e.auth.currentUserToken}}))($);function te(e){return Object(W.jsx)("form",{id:"create-message",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("message",t.target.message.value),e.handleMessage(n)},style:{marginTop:"10px"},children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(_.a,{name:"message",fullWidth:!0,label:"Message",variant:"outlined",required:!0})}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:1}),Object(W.jsx)(g.a,{item:!0,xs:10,children:Object(W.jsx)(E.a,{color:"primary",type:"submit",fullWidth:!0,variant:"contained",children:"Create Message"})}),Object(W.jsx)(g.a,{item:!0,xs:1})]})})}te.defaultProps={handleMessage:function(){}};var ne=te;function ae(e){var t=Object(r.c)(),n=s.a.useState(null),a=Object(y.a)(n,2),c=a[0],i=a[1];s.a.useEffect((function(){t(L())}),[]);var o=function(e){c===e?(i(null),t(A(""))):(i(e),t(A(e)))},l=function(n){S()({method:"delete",url:"api/deleteMessage",params:{messageId:n},headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(L())})).catch((function(e){console.log(e)}))},d=e.messages.map((function(e){var t=new Date(e.CreatedDate),n=e.ID===c;return Object(W.jsx)(ee,{ID:e.ID,Message:e.Message,CreatedBy:e.CreatedBy,CreatedDate:t,getComments:o,deleteMessage:l,viewComments:n},e.ID)}));return Object(W.jsx)(g.a,{container:!0,spacing:3,children:Object(W.jsxs)(s.a.Fragment,{children:[Object(W.jsx)(g.a,{item:!0,xs:2}),Object(W.jsx)(g.a,{item:!0,xs:8,children:e.currentUserToken&&Object(W.jsx)(T.a,{children:Object(W.jsx)(ne,{handleMessage:function(n){S()({method:"post",url:"api/createMessage",data:n,headers:{"Content-Type":"multipart/form-data",Authorization:e.currentUserToken}}).then((function(){t(L()),document.getElementById("create-message").reset()})).catch((function(e){console.log(e)}))}})})}),Object(W.jsx)(g.a,{item:!0,xs:2}),d]})})}ae.defaultProps={messages:[],currentUserToken:null};var se=Object(r.b)((function(e){return{messages:e.message.messages,currentUserToken:e.auth.currentUserToken}}))(ae);var ce=function(){return Object(W.jsx)(g.a,{container:!0,spacing:3,children:Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(I.a,{variant:"h4",children:"Page Not Found"})})})},ie={key:"root",storage:O.a},re=Object(p.a)(ie,x),oe=Object(o.d)(re,{},Object(o.a)(l.a)),le=Object(p.b)(oe);i.a.render(Object(W.jsx)(r.a,{store:oe,children:Object(W.jsx)(h.a,{loading:null,persistor:le,children:Object(W.jsx)(f.a,{children:Object(W.jsxs)(g.a,{container:!0,spacing:3,children:[Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsx)(R,{})}),Object(W.jsx)(g.a,{item:!0,xs:12,children:Object(W.jsxs)(v.c,{children:[Object(W.jsx)(v.a,{exact:!0,path:"/",component:se}),Object(W.jsx)(v.a,{component:ce})]})})]})})})}),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.472b4b91.chunk.js.map